# English Manual

## 1. Overview 
This avatar gimmick casts high-resolution shadows in real time with a relatively low load. 

Shadows are cast on various parts of the avatar, such as the forelock, chin, and chest, giving the avatar an overwhelming sense of three-dimensionality and presence. 



The system is set up to suppress the influence of world lights and mainly illuminate the lights that follow the avatar, so it does not depend on world lights and therefore does not go completely dark in certain worlds. 



There are two ways to use this system, depending on whether or not paid assets are used. 

(1) NGSS version: <br/>Shadow softness, distance attenuation, etc. can be finely adjusted. 

The following assets are used:<br/> [Next-Gen Soft-Shadows]. https://assetstore.unity.com/packages/vfx/shaders/next-gen-soft-shadows-137380?locale=ja-JP 

(2) SimplePCSS version: <br/>This version does not require the purchase of additional assets, but is a simple version with only soft shadows and a mask function.



## 2. Feature Details
PCSS (Percentage Closer Soft Shadows), a mechanism that changes the softness of shadows according to distance, has been customized for use with VRChat. <br/>This allows high-resolution shadows to be cast in real-time with relatively low load, and shadows on various parts of the body, such as the forelocks, chin, and chest, can express an overwhelming sense of three-dimensionality and presence. 

As an implementation of PCSS, the Unity asset Next-Gen Soft-Shadows https://assetstore.unity.com/packages/vfx/shaders/next-gen-soft-shadows-137380?locale=ja-JP <br/>or shaders created with reference to the following OSS. https://github.com/TheMasonX/UnityPCSS 

- Build a custom shader from lilToon for PCSS into your avatar. 

- The above shader is set to be less affected by the world lights and more dominated by the spotlight set up on the avatar.
- As mentioned above, the setup tool incorporates a spotlight into the avatar.
- The spotlight is aimed to focus on the Head.
- The direction of the spotlight can be controlled with PhysBone.
- The intensity of the light can be controlled from the ExpressionMenu.
- The softness and density of the shadows, the influence of the world light can be adjusted, and masks can be set in the "Custom Properties" of the material.
- Some avatars have shadows on the whites of their eyes, but by using the mask function, you can mask the areas where you do not want shadows cast.



## 3. Prerequisites
- Unity2022.3.6f1
- VRChatSDK Avatar 3.0
- lilToon v1.7.2 or later
- PoiyomiPro v9.0.54 or later
- PoiyomiToon v9.0.54 or later
- Not applicable for Quest avatars. 

The following assets are required to use the NGSS version. (SimplePCSS version can be used without them.) 

[Next-Gen Soft-Shadows] https://assetstore.unity.com/packages/vfx/shaders/next-gen-soft-shadows-137380?locale=ja-JP



## 4. Setup steps
0. If you use old version, Remove "Assets/nHaruka/PCSS4VRC" folder. 
1. [Optional] Purchase and import NGSS (Next-Gen Soft-Shadows) from UnityAssetStore. 
2. Import lilToon v1.7.2+ or Poiyomi Pro/Toon v9.0.54+ 
3. Import this package. 
4. Press the menu bar "nHaruka" -> "PCSS For VRC".
5. D&D your avatar in the "Avatar" field of the window that appears.
6. Confirm the setup guide and press "Setup" button.



## 5. Bug Reporting and Support
Bug reports and support requests are centralized on the following Discord. If you have any problems, please contact us at https://discord.gg/zuaYSC5FHg 



Support Guidelines (excerpt) 

- Support requests may not be answered if the problem is a complex combination of other gimmicks, a bug in Unity, or other issues beyond the author's knowledge.
- Requests with unclear content may be difficult to respond to.



## 6. Terms of Use
Secondary distribution of the unitypackage itself, the assets included in it, or the source code, in whole or in part, is prohibited. 

You may publish avatars that incorporate PCSS For VRC using this tool ( * Poiyomi Pro version is NOT allowed.), but you may not redistribute them in a form that makes it possible to extract assets such as the unitypackage. 



The shadow shader of SimplePCSS without NGSS is based on the code of the following open source project. https://github.com/TheMasonX/UnityPCSS